# OpenAI Realtime API Integration

Это приложение использует OpenAI Realtime API для голосового интервью в реальном времени.

## Запуск

1. **Установите зависимости:**
   ```bash
   npm install
   ```

2. **Настройте API ключ:**
   Убедитесь, что в файле `.env.local` есть ваш OpenAI API ключ:
   ```
   OPENAI_API_KEY=sk-proj-...
   ```

3. **Запустите прокси-сервер для Realtime API:**
   ```bash
   npm run proxy
   ```
   Прокси-сервер будет работать на `ws://localhost:3001`

4. **В другом терминале запустите приложение:**
   ```bash
   npm run dev
   ```
   Приложение будет доступно на `http://localhost:3000`

## Как это работает

- **Прокси-сервер** (`realtime-proxy.js`) необходим, потому что браузерные WebSocket не поддерживают кастомные заголовки Authorization. Прокси добавляет заголовок `Authorization: Bearer <API_KEY>` и `OpenAI-Beta: realtime=v1` при подключении к OpenAI Realtime API.

- **Клиент** подключается к локальному прокси-серверу, который перенаправляет все сообщения в OpenAI Realtime API.

- **RNN-подобный шумоподавитель** обрабатывает входящий аудио сигнал перед отправкой в API.

- **Fallback механизм**: Если Realtime API недоступен, автоматически переключается на Chat API + Web Speech API.

## Технические детали

- **Входной аудио**: PCM16, 16kHz
- **Выходной аудио**: PCM16, 24kHz
- **Модель**: `gpt-4o-realtime-preview-2024-12-17`
- **Голос**: `alloy` (можно изменить в `InterviewScreen.tsx`)

## Устранение неполадок

Если интервью не запускается:
1. Убедитесь, что прокси-сервер запущен (`npm run proxy`)
2. Проверьте, что API ключ правильный в `.env.local`
3. Проверьте консоль браузера на наличие ошибок
4. Если Realtime API не работает, приложение автоматически переключится на fallback режим

